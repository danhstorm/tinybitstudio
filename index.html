<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Hitmaker C64 Sequencer</title>
    <link rel="stylesheet" href="styles.css" />
    <script src="https://cdn.jsdelivr.net/npm/tone@next/build/Tone.js"></script>
    <!-- Supabase removed for local server -->
    <script type="module" src="main.js" defer></script>
  </head>
  <body>
    <div id="viewport">
      <!-- SVG Filter for Fisheye Distortion -->
      <svg style="position: absolute; width: 0; height: 0; overflow: hidden;" version="1.1" xmlns="http://www.w3.org/2000/svg">
        <defs>
          <filter id="fisheye">
            <!-- Use a lower resolution texture for the displacement map to improve performance -->
            <feImage xlink:href="data:image/svg+xml;charset=utf-8,%3Csvg xmlns='http://www.w3.org/2000/svg' width='512' height='512' viewBox='0 0 512 512' preserveAspectRatio='none'%3E%3CradialGradient id='g' cx='50%25' cy='50%25' r='65%25' fx='50%25' fy='50%25'%3E%3Cstop offset='0%25' stop-color='%23808080'/%3E%3Cstop offset='100%25' stop-color='%23000000'/%3E%3C/radialGradient%3E%3Crect x='0' y='0' width='512' height='512' fill='url(%23g)' /%3E%3C/svg%3E" result="map" />
            <feDisplacementMap in="SourceGraphic" in2="map" scale="4" xChannelSelector="R" yChannelSelector="G" />
          </filter>
        </defs>
      </svg>
      <div id="console" role="application" aria-label="Retro tracker workstation">
        <!-- <pre id="frame-top" class="frame-line"></pre> -->
        <div id="workspace">
          <section id="drum-panel" class="ascii-panel" aria-label="Drum workstation">
            <div class="panel-body single-frame" id="drum-body"></div>
          </section>

          <section id="synth-panel" class="ascii-panel" aria-label="Synth stack">
            <div class="panel-body" id="synth-body"></div>
          </section>

          <section id="help-panel" class="ascii-panel" aria-label="Help section" style="display: none;">
            <div class="panel-body" id="help-body"></div>
          </section>

          <section id="load-panel" class="ascii-panel" aria-label="Load cartridge slots" style="display: none;">
            <div class="panel-body" id="load-body">
                <div class="overlay-header">
                    <span>CARTRIDGE SLOTS</span>
                    <button type="button" id="load-close" class="transport-btn">[close]</button>
                </div>
                <div id="load-list"></div>
            </div>
          </section>

          <section id="info-panel" class="ascii-panel" aria-label="Control hub">
            <div class="panel-body" id="info-body">
              <div id="intro-field"></div>
              <div id="transport-body"></div>
              <div id="voice-field"></div>
              <div id="menu-field"></div>
              <div id="visualizer-controls"></div>
              <div id="visualizer-shell" class="single-frame">
                <div id="visualizer-body"></div>
              </div>
            </div>
          </section>
        </div>
        <!-- <pre id="frame-bottom" class="frame-line"></pre> -->
      </div>
    </div>
  </body>
</html>
